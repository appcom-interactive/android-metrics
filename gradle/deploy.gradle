task sourcesJar(type: Jar) {
    archiveClassifier.set("sources")
    from sourceSets.main.java
}

artifacts {
    archives sourcesJar
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
            artifact sourcesJar

            groupId = projectGroup
            artifactId = projectName
            version = projectVersion
        }
    }
}

bintray {
    user = project.hasProperty('bintrayUser') ? project.property('bintrayUser') : System.getenv('BINTRAY_USER')
    key = project.hasProperty('bintrayApiKey') ? project.property('bintrayApiKey') : System.getenv('BINTRAY_API_KEY')
    publications = ['mavenJava']
    publish = true
    pkg {
        repo = projectRepository
        name = projectName
        userOrg = user
        licenses = ['Apache-2.0']
        vcsUrl = projectGit
        version {
            name = projectVersion
            desc = projectDescription
            vcsTag = projectVersion
        }
    }
}